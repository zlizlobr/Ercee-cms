# Pilot #2 Spec/Plan Summary

- Initiative: local-c94aa39b
- Pilot evidence subtask: local-a9a2d8a8
- Scope:
  - Execute a real block-level change around `commerce_product_tips_carousel` with frontend impact.
  - Deliver end-to-end block parity:
    - block data contract finalized (field naming and defaults),
    - admin preview parity in CMS,
    - frontend block renderer mapping and component integration.
  - Keep changes bounded to one block contract and its direct render pipeline.
- Non-goals:
  - No multi-block refactor.
  - No unrelated module architecture changes.
  - No payment/order workflow changes.
- Impacted contracts:
  - CMS block contract shape for `commerce_product_tips_carousel` (type + `data` payload fields).
  - Admin preview rendering contract:
    - expected Blade preview component path + field usage.
  - Frontend block registry contract:
    - block type mapping to Astro component and props.
  - Public page payload compatibility:
    - existing block payloads must remain backward-compatible.
- Initial impacted file areas:
  - `/usr/local/var/www/ercee-modules/ercee-module-commerce/src/Filament/Blocks/ProductTipsCarouselBlock.php`
  - `/usr/local/var/www/Ercee-cms/resources/views/components/blocks/` (preview component for block)
  - `/usr/local/var/www/ercee-frontend/src/shared/blocks/registry.ts`
  - `/usr/local/var/www/ercee-frontend/src/features/**/blocks/` (new block renderer component)
  - `/usr/local/var/www/ercee-frontend/src/shared/api/types.ts` (if explicit block typing is required)
- Responsible implementation agent:
  - Primary: `block-builder-agent`
  - Supporting: `docs-editor-agent`, `test-runner-agent`, `review-agent`
- Risks:
  - Contract drift between CMS preview and frontend rendering.
  - Missing frontend mapping for newly introduced block type.
  - Media/link field shape mismatch if block uses rich assets/links.
- Gate 1 exit decision:
  - Approved for Gate 2 implementace with strict one-block scope and mandatory C-stage verification (`verify:blocks`).
