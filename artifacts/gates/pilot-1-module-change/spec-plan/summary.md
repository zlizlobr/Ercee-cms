# Pilot #1 Spec/Plan Summary

- Initiative: local-c94aa39b
- Pilot evidence subtask: local-9e10f998
- Scope:
  - Implement commerce module enhancement in `/usr/local/var/www/ercee-modules/ercee-module-commerce` covering:
    - new product tips carousel block,
    - admin table sorting by product name,
    - stock evidence behavior (in stock / out of stock + quantity),
    - new Commerce settings tab `XML Feeds`,
    - tab-order priority capability (discover existing support, otherwise implement).
  - Keep API contracts backward-compatible.
  - Ensure safe data migration strategy without breaking existing product records.
- Non-goals:
  - No payment gateway redesign.
  - No broad cross-module refactor.
  - No breaking changes to existing storefront API response structure.
- Impacted contracts:
  - Admin resource contract:
    - `Modules\Commerce\Filament\Resources\ProductResource` table and form tabs.
  - Domain persistence contract:
    - product/variant stock semantics in `products` + `product_variants`.
  - Module registration/navigation contract:
    - `Modules\Commerce\CommerceModuleServiceProvider` resources/navigation exposure.
  - Block rendering contract:
    - new carousel block registration and rendering inputs for product recommendations.
- Impacted file areas (initial):
  - `/usr/local/var/www/ercee-modules/ercee-module-commerce/src/Filament/Resources/ProductResource.php`
  - `/usr/local/var/www/ercee-modules/ercee-module-commerce/src/Filament/Resources/ProductResource/RelationManagers/VariantsRelationManager.php`
  - `/usr/local/var/www/ercee-modules/ercee-module-commerce/src/Domain/Product.php`
  - `/usr/local/var/www/ercee-modules/ercee-module-commerce/src/Domain/ProductVariant.php`
  - `/usr/local/var/www/ercee-modules/ercee-module-commerce/src/CommerceModuleServiceProvider.php`
  - `/usr/local/var/www/ercee-modules/ercee-module-commerce/database/migrations/*` (new additive migration only if needed)
  - commerce module docs under `/usr/local/var/www/ercee-modules/ercee-module-commerce/docs/`
- Responsible implementation agent:
  - Primary: `module-builder-agent`
  - Invoked specialists as needed: `block-builder-agent`, `test-runner-agent`, `review-agent`, `docs-editor-agent`
- Risks:
  - Tab ordering may be controlled by framework defaults and need explicit override.
  - Stock behavior can drift between product and variant levels if rules are not unified.
  - Carousel block may require content/selector contract not yet present in module.
- Gate 1 exit decision:
  - Approved for Gate 2 implementace with additive-only migration policy and mandatory review on stock semantics.
